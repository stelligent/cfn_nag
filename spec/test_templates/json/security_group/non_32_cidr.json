{
  "Parameters": {
    "somethingSpecial": {
      "Type": "String"
    }
  },
  "Resources": {
    "sg": {
      "Type": "AWS::EC2::SecurityGroup",
      "Properties": {
        "GroupDescription": "some_group_desc",
        "SecurityGroupIngress": {
          "CidrIp": "10.1.2.0/24",
          "FromPort": 34,
          "ToPort": 34,
          "IpProtocol": "tcp",
          "Description": "some rule description"
        },
        "SecurityGroupEgress": {
          "CidrIp": "10.1.2.3/32",
          "FromPort": 34,
          "ToPort": 34,
          "IpProtocol": "tcp",
          "Description": "some rule description"
        },
        "VpcId": "vpc-9f8e9dfa"
      }
    },
    "sg2": {
      "Type": "AWS::EC2::SecurityGroup",
      "Properties": {
        "GroupDescription": "some_group_desc2",
        "SecurityGroupIngress": [
          {
            "CidrIp": "10.2.0.0/16",
            "FromPort": 36,
            "ToPort": 36,
            "IpProtocol": "tcp",
            "Description": "some rule description"
          },
          {
            "CidrIp": "1.2.3.4/32",
            "FromPort": 46,
            "ToPort": 46,
            "IpProtocol": "tcp",
            "Description": "some rule description"
          },
          {
            "CidrIp": {
              "Ref": "somethingSpecial"
            },
            "FromPort": 33,
            "ToPort": 33,
            "IpProtocol": "tcp",
            "Description": "some rule description"
          }
        ],
        "SecurityGroupEgress": {
          "CidrIp": "10.1.2.3/32",
          "FromPort": 34,
          "ToPort": 34,
          "IpProtocol": "tcp",
          "Description": "some rule description"
        },
        "VpcId": "vpc-9f8e9dfa"
      }
    },
    "sg3": {
      "Type": "AWS::EC2::SecurityGroup",
      "Properties": {
        "GroupDescription": "some_group_desc2",
        "SecurityGroupIngress": {
          "CidrIp": {
            "Ref": "somethingSpecial"
          },
          "FromPort": 33,
          "ToPort": 33,
          "IpProtocol": "tcp",
          "Description": "some rule description"
        },
        "SecurityGroupEgress": {
          "CidrIp": "10.1.2.3/32",
          "FromPort": 34,
          "ToPort": 34,
          "IpProtocol": "tcp",
          "Description": "some rule description"
        },
        "VpcId": "vpc-9f8e9dfa"
      }
    },
    "sg4": {
      "Type": "AWS::EC2::SecurityGroup",
      "Properties": {
        "GroupDescription": "some_group_desc2",
        "SecurityGroupIngress": {
          "CidrIp": [
            {
              "Ref": "somethingSpecial"
            },
            "1.2.3.4/32"
          ],
          "FromPort": 33,
          "ToPort": 33,
          "IpProtocol": "tcp",
          "Description": "some rule description"
        },
        "SecurityGroupEgress": {
          "CidrIp": "10.1.2.3/32",
          "FromPort": 34,
          "ToPort": 34,
          "IpProtocol": "tcp",
          "Description": "some rule description"
        },
        "VpcId": "vpc-9f8e9dfa"
      }
    }
  }
}